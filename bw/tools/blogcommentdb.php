<?phpnamespace BW\tools;class blogcommentdb {    private $mydb;    public function __construct(Database $db) {        $this->mydb = $db->getConnection();    }    public function filter($data) {        $data = trim($data);        $data = htmlspecialchars($data);        return $data;    }    public function addComment(blogcomment $comment) {        // echo "<pre>", print_r($user), "</pre>";        try {            $stmt = $this->mydb->prepare("insert into blog_comments"                    . "(commentpostid, commenttext, commentdate , commentisvisible, commentname)"                    . "values(:pcommentpostid, :pcommenttext, :pcommentdate, :pcommentisvisible, :pcommentname)");            $stmt->bindValue(":pcommentpostid", $comment->commentpostid);            $stmt->bindValue(":pcommenttext", $comment->commenttext);            $stmt->bindValue(":pcommentdate", $comment->commentdate);            $stmt->bindValue(":pcommentisvisible", $comment->commentisvisible);            $stmt->bindValue(":pcommentname", $comment->commentname);            $result = $stmt->execute();            return $stmt->rowCount();        } catch (PDOException $pe) {            echo "<br /> error occurred " . $pe->getMessage();            return false;        }    }    public function getCommentsByPost($postid) {        if(!isset($postid)) return false;        try {            $stmt = $this->mydb->prepare("select * from blog_comments where commentpostid=:pcommentpostid");            $stmt->bindValue(":pcommentpostid", $postid);            $stmt->execute();            $stmt->setFetchMode(\PDO::FETCH_ASSOC);            $blogcommentslist = array();            while ($row = $stmt->fetch()) {                $bcomment = new blogcomment();                $bcomment->commentid = $this->filter($row['commentid']);                $bcomment->commenttext = $this->filter($row['commenttext']);                $bcomment->commentdate = $this->filter($row['commentdate']);                $bcomment->commentisvisible = $this->filter($row['commentisvisible']);                $bcomment->commentname = $this->filter($row['commentname']);                $blogcommentslist[] = $bcomment;            }            return $blogcommentslist;        } catch (\PDOException $pe) {            echo "<br /> Error occurred " . $pe->getMessage();        }    }}